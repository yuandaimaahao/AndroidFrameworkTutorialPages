(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{526:function(s,t,n){"use strict";n.r(t);var a=n(2),e=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"什么是-debugfs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是-debugfs"}},[s._v("#")]),s._v(" 什么是 Debugfs")]),s._v(" "),t("p",[s._v("DebugFS，是一种用于内核调试的虚拟文件系统，内核中提供了相应的函数，将一些日志信息写入这个虚拟文件系统，内核的使用者通过查看这个虚拟文件系统对应的文件，即可了解内核中对用模块的运行状况。")]),s._v(" "),t("h2",{attrs:{id:"debugfs-中的-binder"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#debugfs-中的-binder"}},[s._v("#")]),s._v(" Debugfs 中的 Binder")]),s._v(" "),t("p",[s._v("debugfs 文件系统默认挂载在节点 /sys/kernel/debug，binder 驱动初始化的过程会在该节点下先创建 /binder 目录，然后在该目录下创建下面文件和目录：")]),s._v(" "),t("ul",[t("li",[s._v("proc")]),s._v(" "),t("li",[s._v("stats")]),s._v(" "),t("li",[s._v("state")]),s._v(" "),t("li",[s._v("transactions")]),s._v(" "),t("li",[s._v("transaction_log")]),s._v(" "),t("li",[s._v("failed_transaction_log")])]),s._v(" "),t("p",[s._v("在 binder 驱动的 binder_init 函数中：")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// drivers/android/binder.c")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" __init "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("binder_init")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//.....")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在 /sys/kernel/debug 目录下创建 binder 文件夹")]),s._v("\n\tbinder_debugfs_dir_entry_root "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("debugfs_create_dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"binder"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\tbinder_debugfs_dir_entry_proc "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("debugfs_create_dir")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proc"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t\t\t binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 在 /sys/kernel/debug 目录下创建 binder 文件夹")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("debugfs_create_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"state"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0444")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("binder_state_fops"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("debugfs_create_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stats"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0444")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("binder_stats_fops"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("debugfs_create_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"transactions"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0444")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NULL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("binder_transactions_fops"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("debugfs_create_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"transaction_log"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0444")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("binder_transaction_log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("binder_transaction_log_fops"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("debugfs_create_file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"failed_transaction_log"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0444")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    binder_debugfs_dir_entry_root"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("binder_transaction_log_failed"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("binder_transaction_log_fops"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br")])]),t("p",[s._v("binder 相关的调试文件就是通过上述的代码完成创建的。")]),s._v(" "),t("p",[s._v("在 binder 驱动源码中有很多 binder_debug 函数调用：")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[s._v("\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("binder_debug")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BINDER_DEBUG_OPEN_CLOSE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%s: %d threads %d, nodes %d (ref %d), refs %d, active transactions %d\\n"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t     "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("__func__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" proc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("pid"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" threads"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" nodes"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" incoming_refs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t     outgoing_refs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" active_transactions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\t"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("binder_debug")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BINDER_DEBUG_SPINLOCKS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%s: line=%d\\n"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("__func__")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" line"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("binder_debug")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("BINDER_DEBUG_INTERNAL_REFS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t\t     "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"refless node %d deleted\\n"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t\t\t\t     node"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("->")]),s._v("debug_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("binder_debug 函数会把日志信息写入到我们创建好的 debugfs 中的文件中。binder_debug 的第一个参数叫 debug_mask，它决定了我们日志的类型与日志所在的文件。")]),s._v(" "),t("h2",{attrs:{id:"内核模块参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内核模块参数"}},[s._v("#")]),s._v(" 内核模块参数")]),s._v(" "),t("p",[s._v("有的时候，在执行一些内核模块时，需要我们传入一些参数，内核提供了 "),t("code",[s._v("module_param")]),s._v(" 宏来实现这个功能：")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//假设模块名为 xxx")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//定义一个内核模块参数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unsigned")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" int_var "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("module_param")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("int_var"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" uint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" S_IRUGO"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("上面的代码定义了一个模块参数 "),t("code",[s._v("int_var")]),s._v("，我们可以在执行模块时传入参数值：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("//执行内核模块时，传入参数\ninsmod xxx.ko "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("int_var")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("x\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("除了在执行时传入参数值，我们还可以通过写文件来传参数：每一个模块参数会对应一个文件 "),t("code",[s._v("/sys/module/模块名/parameters/参数名")]),s._v("，上面的示例中的模块参数对应的文件就是 "),t("code",[s._v("/sys/module/xxx/parameters/int_var")]),s._v("，那么我们通过写这个文件就能把参数传入模块中，向文件写数据，我们可以通过 C 语言实现，也可以使用 shell 命令实现，这里我们给一个 shell 脚本的例子：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /sys/module/xxx/parameters/int_var\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("执行完这个命令后，在模块中的 int_var 参数的值就变成 8 了。")]),s._v(" "),t("p",[s._v("回过头来，module_param 的具体实现如下：")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token macro-name function"}},[s._v("module_param")]),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t\t\t\t")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("module_param_named")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("可以看出 module_param 就是 module_param_named 的马甲：")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// module_param_named 的具体实现就不再深入了，了解功能即可，这个不是本文重点")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token macro-name function"}},[s._v("module_param_named")]),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t\t\t   ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("param_check_")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("##")]),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t\t\t   ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("module_param_cb")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("param_ops_")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("##")]),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" perm"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\t\t   ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("__MODULE_PARM_TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" #type"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("module_param_named 相比 module_param ，可以给模块参数一个初始值 value。")]),s._v(" "),t("h2",{attrs:{id:"binder-驱动中的模块参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#binder-驱动中的模块参数"}},[s._v("#")]),s._v(" Binder 驱动中的模块参数")]),s._v(" "),t("p",[s._v("在 Binder 驱动中都是使用的 "),t("code",[s._v("module_param_named")]),s._v(" 来定义模块参数。接下来我们来看一个 Binder 驱动中的模块参数 debug_mask，其定义如下：")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("uint32_t")]),s._v(" binder_debug_mask "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" BINDER_DEBUG_USER_ERROR "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n\tBINDER_DEBUG_FAILED_TRANSACTION "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" BINDER_DEBUG_DEAD_TRANSACTION"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("module_param_named")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("debug_mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" binder_debug_mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" uint"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0644")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("上面的代码执行后，就会生成对应的文件 "),t("code",[s._v("/sys/module/binder/parameters/debug_mask")]),s._v("，当我们修改这个文件的值时，就会修改 Binder 驱动中 debug_mask 的值。")]),s._v(" "),t("p",[s._v("debug_mask 是一个无符号整型，有一个初始值 binder_debug_mask，这个模块参数扮演了 Log 开关的角色，通过设置 debug_mask 的值可以打印我们需要的 Log 信息。debug_mask 通过二进制"),t("code",[s._v("或操作")]),s._v("设置 uint32_t 类型中的每一个位的值来决定其功能。")]),s._v(" "),t("p",[s._v("具体来说，debug_mask 有以下一些可选值：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"center"}},[s._v("类型")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("二进制值")]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[s._v("解释")])])]),s._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_USER_ERROR")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("1")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("用户使用错误")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_FAILED_TRANSACTION")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("transaction失败")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_DEAD_TRANSACTION")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("100")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("transaction死亡")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_OPEN_CLOSE")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("1000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("binder的open/close/mmap信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_DEAD_BINDER")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("binder/node死亡信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_DEATH_NOTIFICATION")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("100000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("binder死亡通知信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_READ_WRITE")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("1000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("binder的read/write信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_USER_REFS")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("binder引用计数")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_THREADS")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("100000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("binder_thread信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_TRANSACTION")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("1000000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("transaction信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_TRANSACTION_COMPLETE")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10000000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("transaction完成信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_FREE_BUFFER")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("100000000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("可用buffer信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("undefinedBINDER_DEBUG_INTERNAL_REFS")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("1000000000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("binder内部引用计数")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_BUFFER_ALLOC")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("10000000000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("同步内存分配信息")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_PRIORITY_CAP")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("100000000000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("调整binder线程的nice值")])]),s._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"center"}},[s._v("BINDER_DEBUG_BUFFER_ALLOC_ASYNC")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("1000000000000000")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("异步内存分配信息")])])])]),s._v(" "),t("p",[s._v("比如我们需要打印 "),t("code",[s._v("transaction 失败")]),s._v(" 与 "),t("code",[s._v("transaction死亡")]),s._v(" 信息，那么我们就可以把 binder_debug_mask 的值设置为 "),t("code",[s._v("10 | 100 = 110")]),s._v(" 即十进制的 6 即可：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /sys/module/binder/parameters/debug_mask\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("在内核源码中我们使用 binder_debug 打印 Log 信息到 debugfs 文件系统中：")]),s._v(" "),t("div",{staticClass:"language-c line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token macro-name function"}},[s._v("binder_debug")]),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("binder_debug_mask "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" mask"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t\t\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pr_info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token expression"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])])]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("我们也可以通过 binder_debug 的第一个参数来添加 "),t("code",[s._v("binder_debug_mask")]),s._v(" 的值。")]),s._v(" "),t("h2",{attrs:{id:"节点分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#节点分析"}},[s._v("#")]),s._v(" 节点分析")]),s._v(" "),t("p",[s._v("在进行 Binder debug 或分析问题时，通常需要看一下当前的 Binder 状态信息。Kernel 通过 SYS 系统提供了一些文件节点供我们读取，它们位于 /sys/kernel/debug/binder/，分别为：")]),s._v(" "),t("ul",[t("li",[s._v("Stats：Binder传输的统计信息。")]),s._v(" "),t("li",[s._v("State：当前Binder所有进程的状态。")]),s._v(" "),t("li",[s._v("Transactions：当前Binder所有进程的传输状态。")]),s._v(" "),t("li",[s._v("transaction_log：最近的Binder传输。")]),s._v(" "),t("li",[s._v("failed_transaction_log：最近失败的Binder传输。")])]),s._v(" "),t("h3",{attrs:{id:"stats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#stats"}},[s._v("#")]),s._v(" Stats")]),s._v(" "),t("p",[s._v("Stats 包含的 Binder 的统计信息，包括传输命令的统计，内部对象的统计等。开始输出的是全部 Binder 的统计信息，之后按 Binder 进程逐个输出统计信息。")]),s._v(" "),t("p",[s._v("通过")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /sys/kernel/debug/binder/stats\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("命令即可查看 Stats 信息：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("binder stats:\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  Binder BC 命令计数")]),s._v("\nBC_TRANSACTION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21561")]),s._v("\nBC_REPLY: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19102")]),s._v("\nBC_FREE_BUFFER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("97947")]),s._v("\nBC_INCREFS: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12458")]),s._v("\nBC_ACQUIRE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12650")]),s._v("\nBC_RELEASE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10812")]),s._v("\nBC_DECREFS: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10156")]),s._v("\nBC_INCREFS_DONE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10691")]),s._v("\nBC_ACQUIRE_DONE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10692")]),s._v("\nBC_REGISTER_LOOPER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("145")]),s._v("\nBC_ENTER_LOOPER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("132")]),s._v("\nBC_REQUEST_DEATH_NOTIFICATION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("861")]),s._v("\nBC_CLEAR_DEATH_NOTIFICATION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("374")]),s._v("\nBC_DEAD_BINDER_DONE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("\nBC_TRANSACTION_SG: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33879")]),s._v("\nBC_REPLY_SG: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23474")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Binder BR 返回命令计数")]),s._v("\nBR_TRANSACTION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("55440")]),s._v("\nBR_REPLY: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("42575")]),s._v("\nBR_TRANSACTION_COMPLETE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98014")]),s._v("\nBR_INCREFS: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10704")]),s._v("\nBR_ACQUIRE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10705")]),s._v("\nBR_RELEASE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9793")]),s._v("\nBR_DECREFS: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9781")]),s._v("\nBR_SPAWN_LOOPER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("149")]),s._v("\nBR_DEAD_BINDER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\nBR_CLEAR_DEATH_NOTIFICATION_DONE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("374")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Binder 内部对象计数，active 表示有效的对象数量，total 表示开机到现在总共创建的对象数量")]),s._v("\nproc: active "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("99")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1336")]),s._v("\nthread: active "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("456")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1992")]),s._v("\nnode: active "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("912")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10843")]),s._v("\nref: active "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1720")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12622")]),s._v("\ndeath: active "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("484")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("861")]),s._v("\ntransaction: active "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98016")]),s._v("\ntransaction_complete: active "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" total "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("98016")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进程 PID")]),s._v("\nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3257")]),s._v("\ncontext binder\n  threads: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Binder 线程数")]),s._v("\n  requested threads: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("+1/15 "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 请求线程数 + 已启动线程数/最大线程数")]),s._v("\n  ready threads "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 已经准备好的线程数")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" async space "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("520192")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 异步传输可用空间，单位字节")]),s._v("\n  nodes: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("                  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# binder_node 结构体数量  ")]),s._v("\n  refs: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 引用计数， s 强 w 弱")]),s._v("\n  buffers: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# allocated_buffers (已分配的buffer个数)")]),s._v("\n  pages: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":2:252            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# page 相关信息")]),s._v("\n  pages high watermark: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  pending transactions: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# proc 的 todo 队列事务个数")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前进程 binder BC 命令计数")]),s._v("\n  BC_TRANSACTION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("\n  BC_FREE_BUFFER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v("\n  BC_INCREFS: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\n  BC_ACQUIRE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\n  BC_RELEASE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  BC_DECREFS: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  BC_INCREFS_DONE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  BC_ACQUIRE_DONE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  BC_REGISTER_LOOPER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  BC_ENTER_LOOPER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当前进程 Binder BR 返回命令计数")]),s._v("\n  BR_TRANSACTION: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  BR_REPLY: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v("\n  BR_TRANSACTION_COMPLETE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("\n  BR_INCREFS: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  BR_ACQUIRE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n  BR_SPAWN_LOOPER: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ...... 其他进程信息")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br")])]),t("p",[s._v("命令计数的规律如下: BC_TRANSACTION + BC_REPLY = BR_TRANSACTION_COMPLETE + BR_DEAD_REPLY + BR_FAILED_REPLY")]),s._v(" "),t("p",[s._v("为什么是会是这样呢,因为每次 BC_TRANSACTION 或着 BC_REPLY,都是有相应的 BR_TRANSACTION_COMPLETE,在传输不出异常的情况下这个次数是相等,有时候可能 transaction 失败, 所以还需要加上 BR_DEAD_REPLY 和 BR_FAILED_REPLY 的情况.")]),s._v(" "),t("ul",[t("li",[s._v("当 binder 内存紧张时，可查看 free async space 和 buffers 字段")]),s._v(" "),t("li",[s._v("当系统空闲时，一般来说 ready_threads = requested_threads_started + BC_ENTER_LOOPER； 当系统繁忙时 ready_threads 可能为0。例如 system_server 进程的 ready_threads 线程个数越少，系统可能处于越繁忙的状态；")]),s._v(" "),t("li",[s._v("绝大多数的进程 max_threads = 15，而 surfaceflinger 最大线程个数为 4，servicemanager 最大线程个数为 0(只有主线程)；")])]),s._v(" "),t("p",[s._v("举个实际的例子：想查看当前系统所有进程的异步可用内存情况，可执行：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("adb shell "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /d/binder/stats "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("egrep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proc|free async space"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h3",{attrs:{id:"state"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#state"}},[s._v("#")]),s._v(" State")]),s._v(" "),t("p",[s._v("State 中主要记录了当前所有进程的 Binder 状态。")]),s._v(" "),t("p",[s._v("通过")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /sys/kernel/debug/binder/state\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("命令即可查看 State 信息：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("binder state:\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 死亡节点的信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录的时死亡的 Binder（dead node）。因为这些Binder的进程已经死掉，它们当前不属于任何进程，所以将它们记录在一个全局的队列中（binder_proc 的 binder_dead_nodes 中）")]),s._v("\ndead nodes:        \n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34015")]),s._v(": u00007231e521b760 c00007231e518cdd0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("33574")]),s._v(": u00007231e521b6e0 c00007231e50c2170 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14081")]),s._v(": u00007231e521b3c0 c00007231e50c1040 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14079")]),s._v(": u00007231e521b200 c00007231e5183610 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13553")]),s._v(": u00007231e52117a0 c00007231e518cdd0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13164")]),s._v(": u00007231e5211240 c00007231e50c2170 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29997")]),s._v(": u00007231e521b9a0 c00007231e518cdd0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29915")]),s._v(": u00007231e521b960 c00007231e50c2170 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("31122")]),s._v(": u0000723154d204c0 c00007231e50c1540 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35433")]),s._v(": u00007231e521b9a0 c00007231e518cdd0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35303")]),s._v(": u00007231e521b960 c00007231e50c2170 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("660")]),s._v(": u00007bd4d168a7a0 c00007bd4d16066f8 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":120 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ......")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("p",[s._v("开头信息记录的是死亡的 Binder（dead node）。因为这些 Binder 的进程已经死掉，它们当前不属于任何进程，所以将它们记录在一个全局的队列中（binder_proc 的 binder_dead_nodes 中）")]),s._v(" "),t("p",[s._v("我们来看下第一个 node：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# debug_id   ptr               cookie     ")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34015")]),s._v(": u00007231e521b760 c00007231e518cdd0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("34015：对应 binder_node 中的 debug_id")]),s._v(" "),t("li",[s._v("u00007231e521b760：对应 binder_node 中的 ptr")]),s._v(" "),t("li",[s._v("c00007231e518cdd0：对应 binder_node 中的 cookie")]),s._v(" "),t("li",[s._v("hs：对应 binder_node 中的 has_strong_ref，表示是否存在强引用")]),s._v(" "),t("li",[s._v("hw：对应 binder_node 中的 has_weak_ref，表示是否存在弱引用")]),s._v(" "),t("li",[s._v("ls：对应 binder_node 中的 local_strong_refs，表示是否存在驱动内部的 binder 强引用计数")]),s._v(" "),t("li",[s._v("lw：对应 binder_node 中的 local_weak_refs，表示驱动内部的 binder 弱引用计数")]),s._v(" "),t("li",[s._v("is: 对应 binder_node 中的 internal_strong_refs，表示 binder node 的外部强引用计数")]),s._v(" "),t("li",[s._v("iw：binder_ref 的引用数")]),s._v(" "),t("li",[s._v("proc：对应的进程 pid")])]),s._v(" "),t("p",[s._v("我们接着往下看，就是进程相关的信息了：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进程 pid")]),s._v("\nproc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3257")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 线程状态")]),s._v("\ncontext binder\n  thread "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3257")]),s._v(": l 00 need_return "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  thread "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3270")]),s._v(": l 00 need_return "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  thread "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3273")]),s._v(": l "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" need_return "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  thread "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3274")]),s._v(": l "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" need_return "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# binder node 信息")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56400")]),s._v(": u0000723154c2d5a0 c00007231e50c0fa0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56414")]),s._v(": u0000723154c2d640 c00007231e50c1130 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56402")]),s._v(": u0000723154c2d6e0 c00007231e50c1090 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56346")]),s._v(": u00007231e5280220 c00007231e50c0aa0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56376")]),s._v(": u00007231e52802a0 c00007231e50c0af0 pri "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(":139 hs "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" hw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" lw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" is "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" iw "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" proc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1772")]),s._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# binder ref 信息")]),s._v("\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56341")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56344")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2125")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56349")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1663")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56350")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2727")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56351")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3729")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56352")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2078")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56353")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2844")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56354")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2969")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56355")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2116")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56356")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2788")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56357")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2848")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56358")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2996")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56359")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1712")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56360")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3304")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56361")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2731")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56362")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2965")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56363")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3669")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56364")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2774")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56365")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1790")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56366")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3270")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56367")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3136")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56419")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5111")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56421")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56420")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  ref "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("56426")]),s._v(": desc "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("378")]),s._v(" s "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" w "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" d 0000000000000000\n  \n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# binder buffer 信息")]),s._v("\n  buffer "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32426")]),s._v(": 0000000000000000 size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":0:0 delivered\n  buffer "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20810")]),s._v(": 0000000000000000 size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(":0:0 delivered\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br")])]),t("h3",{attrs:{id:"transactions"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transactions"}},[s._v("#")]),s._v(" Transactions")]),s._v(" "),t("p",[s._v("Transactions 中记录了当前系统中所有 Binder 进程的传输状态:")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("binder transactions:\ncontext binder\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#buffer id    数据地址     数据长度与偏移量  active/delivered")]),s._v("\n  buffer "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29494")]),s._v(": 0000000000000000 size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(":0:0 delivered\n  buffer "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35759")]),s._v(": 0000000000000000 size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(":8:0 delivered\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"transaction-log-和-failed-transaction-log"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#transaction-log-和-failed-transaction-log"}},[s._v("#")]),s._v(" transaction_log 和 failed_transaction_log")]),s._v(" "),t("p",[s._v("transaction_log 中记录了最近的 Binder 传输，failed_transaction_log 中记录了最近失败的 Binder 传输。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121480")]),s._v(": call  from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1912")]),s._v(":2231 to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1408")]),s._v(":0 context binder "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(":0 ret "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("l")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("121481")]),s._v(": reply from "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1408")]),s._v(":1408 to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1912")]),s._v(":2231 context binder "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("node")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" handle "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" size "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(":0 ret "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/0 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("l")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("ul",[t("li",[s._v("121438: debug_id")]),s._v(" "),t("li",[s._v("reply from 和 call from : call_type")]),s._v(" "),t("li",[s._v("from 1524:1524 to 1772:1848 ：from_proc:from_thread  to_proc:to_thread")]),s._v(" "),t("li",[s._v("node 1：to_node")]),s._v(" "),t("li",[s._v("handle：target_handle")]),s._v(" "),t("li",[s._v("size 100:0：data_size:offsets_size")])]),s._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://blog.csdn.net/vviccc/article/details/122354587",target:"_blank",rel:"noopener noreferrer"}},[s._v("android 系统核心机制binder（14）binder调试总结"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"http://gityuan.com/2016/08/27/binder-debug/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Binder子系统之调试分析(一)"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"http://gityuan.com/2016/08/28/binder-debug-2/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Binder子系统之调试分析(二)"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000020767265",target:"_blank",rel:"noopener noreferrer"}},[s._v("Binder驱动之debug信息与数据结构"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"关于"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关于"}},[s._v("#")]),s._v(" 关于")]),s._v(" "),t("p",[s._v("我叫阿豪，2015 年本科毕业于国防科学技术大学指挥信息系统专业，毕业后从事信息化装备的研发工作，主要研究方向是 Android Framework 与 Linux Kernel。")]),s._v(" "),t("p",[s._v("如果你对 Android Framework 感兴趣或者正在学习 Android Framework，可以关注我的微信公众号和抖音，我会持续分享我的学习经验，帮助正在学习的你少走一些弯路。学习过程中如果你有疑问或者你的经验想要分享给大家可以添加我的微信，我拉你进技术交流群。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/zzh0838/MyImages@main/img/%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg",alt:""}})])])}),[],!1,null,null,null);t.default=e.exports}}]);