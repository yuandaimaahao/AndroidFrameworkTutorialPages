(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{485:function(s,a,n){"use strict";n.r(a);var t=n(2),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("iframe",{attrs:{src:"//player.bilibili.com/player.html?aid=783457457&bvid=BV1V24y1M7pC&cid=1122427169&page=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"}}),s._v(" "),a("h2",{attrs:{id:"_1-什么是-product"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是-product"}},[s._v("#")]),s._v(" 1. 什么是 Product")]),s._v(" "),a("p",[s._v("在 App 的开发中，我们要去打渠道包，根据不同应用市场的要求打包出不同的 apk 包。")]),s._v(" "),a("p",[s._v("同样的道理，Android 的系统源码，经过简单的配置，可以打包出不同的系统镜像，用于不同的产品。例如小米 12s，小米12s pro，小米12s ultra 均源于骁龙8+平台。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/zzh0838/MyImages@main/img/20230703155709.png",alt:""}})]),s._v(" "),a("p",[s._v("Android 系统源码是通过配置文件来实现 “分包” 的，配置文件将我们的源码配置为了不同的 Product，每一个 Product 适用于特定的硬件产品，这一系列的配置文件我们称为 "),a("strong",[s._v("Product")]),s._v("。")]),s._v(" "),a("h2",{attrs:{id:"_2-aosp-中预制的-product"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-aosp-中预制的-product"}},[s._v("#")]),s._v(" 2. AOSP 中预制的 Product")]),s._v(" "),a("p",[s._v("我们在编译源码之前需要执行 lunch ：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lunch\n\nYou're building on Linux\n\nLunch menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". pick a combo:\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". aosp_arm-eng\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". aosp_arm64-eng\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". aosp_blueline-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(". aosp_bonito-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(". aosp_car_arm-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(". aosp_car_arm64-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(". aosp_car_x86-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(". aosp_car_x86_64-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(". aosp_cf_arm64_phone-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(". aosp_cf_x86_64_phone-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(". aosp_cf_x86_auto-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v(". aosp_cf_x86_phone-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(". aosp_cf_x86_tv-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(". aosp_coral-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v(". aosp_coral_car-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(". aosp_crosshatch-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v(". aosp_crosshatch_car-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(". aosp_flame-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(". aosp_marlin-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(". aosp_sailfish-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(". aosp_sargo-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(". aosp_taimen-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(". aosp_walleye-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(". aosp_walleye_test-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v(". aosp_x86-eng\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(". aosp_x86_64-eng\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(". beagle_x15-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),s._v(". car_x86_64-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(". fuchsia_arm64-eng\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(". fuchsia_x86_64-eng\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("31")]),s._v(". hikey-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v(". hikey64_only-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("33")]),s._v(". hikey960-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(". hikey960_tv-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v(". hikey_tv-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(". m_e_arm-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("37")]),s._v(". mini_emulator_arm64-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("38")]),s._v(". mini_emulator_x86-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("39")]),s._v(". mini_emulator_x86_64-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v(". poplar-eng\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(". poplar-user\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("42")]),s._v(". poplar-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("43")]),s._v(". qemu_trusty_arm64-userdebug\n     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),s._v(". uml-userdebug\n\nWhich would you like? "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("aosp_arm-eng"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br")])]),a("p",[s._v("这里的每一个选项就是一个 Product， AOSP 预制了很多 Product。对应于 x86_64 模拟器，我们选择的是 aosp_x86_64-eng。")]),s._v(" "),a("p",[s._v("AOSP 中 Product 配置文件保存在以下两个目录：")]),s._v(" "),a("ul",[a("li",[s._v("build/target：aosp 提供的 product 配置文件保存在这个目录下，我们选择的 aosp_x86_64-eng Product 就配置在这个目录下。")]),s._v(" "),a("li",[s._v("device：芯片及方案厂商提供的 product 配置文件保存在这个目录下")])]),s._v(" "),a("p",[s._v("先使用 tree 命令查看 build/target 基本的目录结构:")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("tree "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-L")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── board\n│   ├── Android.mk\n│   ├── BoardConfigEmuCommon.mk\n│   ├── BoardConfigGsiCommon.mk\n│   ├── BoardConfigMainlineCommon.mk\n│   ├── BoardConfigModuleCommon.mk\n│   ├── BoardConfigPixelCommon.mk\n│   ├── emulator_arm\n│   ├── emulator_arm64\n│   ├── emulator_x86\n│   ├── emulator_x86_64\n│   ├── emulator_x86_64_arm64\n│   ├── emulator_x86_arm\n│   ├── generic\n│   ├── generic_64bitonly_x86_64\n│   ├── generic_arm64\n│   ├── generic_x86\n│   ├── generic_x86_64\n│   ├── generic_x86_64_arm64\n│   ├── generic_x86_arm\n│   ├── go_defaults_512.prop\n│   ├── go_defaults_common.prop\n│   ├── go_defaults.prop\n│   ├── gsi_arm64\n│   ├── gsi_system_ext.prop\n│   ├── gsi_system_ext_user.prop\n│   ├── mainline_arm64\n│   ├── mainline_sdk\n│   ├── mainline_x86\n│   ├── mainline_x86_64\n│   ├── mainline_x86_arm\n│   ├── module_arm\n│   ├── module_arm64\n│   ├── module_x86\n│   ├── module_x86_64\n│   └── ndk\n├── OWNERS\n└── product\n    ├── AndroidProducts.mk\n    ├── aosp_64bitonly_x86_64.mk\n    ├── aosp_arm64.mk\n    ├── aosp_arm.mk\n    ├── aosp_base.mk\n    ├── aosp_base_telephony.mk\n    ├── aosp_product.mk\n    ├── aosp_x86_64.mk\n    ├── aosp_x86_arm.mk\n    ├── aosp_x86.mk\n    ├── base.mk\n    ├── base_product.mk\n    ├── base_system_ext.mk\n    ├── base_system.mk\n    ├── base_vendor.mk\n    ├── cfi-common.mk\n    ├── core_64_bit.mk\n    ├── core_64_bit_only.mk\n    ├── core_minimal.mk\n    ├── core_no_zygote.mk\n    ├── default_art_config.mk\n    ├── developer_gsi_keys.mk\n    ├── empty-preloaded-classes\n    ├── empty-profile\n    ├── emulated_storage.mk\n    ├── emulator.mk\n    ├── emulator_system.mk\n    ├── emulator_vendor.mk\n    ├── full_base.mk\n    ├── full_base_telephony.mk\n    ├── full.mk\n    ├── full_x86.mk\n    ├── generic.mk\n    ├── generic_no_telephony.mk\n    ├── generic_ramdisk.mk\n    ├── generic_system_arm64.mk\n    ├── generic_system.mk\n    ├── generic_system_x86_64.mk\n    ├── generic_system_x86_arm.mk\n    ├── generic_system_x86.mk\n    ├── generic_x86.mk\n    ├── go_defaults_512.mk\n    ├── go_defaults_common.mk\n    ├── go_defaults.mk\n    ├── gsi\n    ├── gsi_release.mk\n    ├── handheld_product.mk\n    ├── handheld_system_ext.mk\n    ├── handheld_system.mk\n    ├── handheld_vendor.mk\n    ├── languages_default.mk\n    ├── languages_full.mk\n    ├── mainline_sdk.mk\n    ├── mainline_system_arm64.mk\n    ├── mainline_system.mk -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" generic_system.mk\n    ├── mainline_system_x86_64.mk\n    ├── mainline_system_x86_arm.mk\n    ├── mainline_system_x86.mk\n    ├── media_product.mk\n    ├── media_system_ext.mk\n    ├── media_system.mk\n    ├── media_vendor.mk\n    ├── module_arm64.mk\n    ├── module_arm.mk\n    ├── module_common.mk\n    ├── module_x86_64.mk\n    ├── module_x86.mk\n    ├── ndk.mk\n    ├── non_ab_device.mk\n    ├── OWNERS\n    ├── product_launched_with_k.mk\n    ├── product_launched_with_l.mk\n    ├── product_launched_with_l_mr1.mk\n    ├── product_launched_with_m.mk\n    ├── product_launched_with_n.mk\n    ├── product_launched_with_n_mr1.mk\n    ├── product_launched_with_o.mk\n    ├── product_launched_with_o_mr1.mk\n    ├── product_launched_with_p.mk\n    ├── profile_boot_common.mk\n    ├── runtime_libart.mk\n    ├── sdk_arm64.mk\n    ├── sdk.mk\n    ├── sdk_phone_arm64.mk\n    ├── sdk_phone_armv7.mk\n    ├── sdk_phone_x86_64.mk\n    ├── sdk_phone_x86.mk\n    ├── sdk_x86_64.mk\n    ├── sdk_x86.mk\n    ├── security\n    ├── sysconfig\n    ├── telephony.mk\n    ├── telephony_product.mk\n    ├── telephony_system_ext.mk\n    ├── telephony_system.mk\n    ├── telephony_vendor.mk\n    ├── updatable_apex.mk\n    ├── userspace_reboot.mk\n    ├── vboot.mk\n    ├── verity.mk\n    ├── virtual_ab_ota\n    ├── virtual_ab_ota.mk -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" virtual_ab_ota/launch.mk\n    ├── virtual_ab_ota_plus_non_ab.mk -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" virtual_ab_ota/plus_non_ab.mk\n    └── virtual_ab_ota_retrofit.mk -"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" virtual_ab_ota/retrofit.mk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br"),a("span",{staticClass:"line-number"},[s._v("109")]),a("br"),a("span",{staticClass:"line-number"},[s._v("110")]),a("br"),a("span",{staticClass:"line-number"},[s._v("111")]),a("br"),a("span",{staticClass:"line-number"},[s._v("112")]),a("br"),a("span",{staticClass:"line-number"},[s._v("113")]),a("br"),a("span",{staticClass:"line-number"},[s._v("114")]),a("br"),a("span",{staticClass:"line-number"},[s._v("115")]),a("br"),a("span",{staticClass:"line-number"},[s._v("116")]),a("br"),a("span",{staticClass:"line-number"},[s._v("117")]),a("br"),a("span",{staticClass:"line-number"},[s._v("118")]),a("br"),a("span",{staticClass:"line-number"},[s._v("119")]),a("br"),a("span",{staticClass:"line-number"},[s._v("120")]),a("br"),a("span",{staticClass:"line-number"},[s._v("121")]),a("br"),a("span",{staticClass:"line-number"},[s._v("122")]),a("br"),a("span",{staticClass:"line-number"},[s._v("123")]),a("br"),a("span",{staticClass:"line-number"},[s._v("124")]),a("br"),a("span",{staticClass:"line-number"},[s._v("125")]),a("br"),a("span",{staticClass:"line-number"},[s._v("126")]),a("br"),a("span",{staticClass:"line-number"},[s._v("127")]),a("br"),a("span",{staticClass:"line-number"},[s._v("128")]),a("br"),a("span",{staticClass:"line-number"},[s._v("129")]),a("br"),a("span",{staticClass:"line-number"},[s._v("130")]),a("br"),a("span",{staticClass:"line-number"},[s._v("131")]),a("br"),a("span",{staticClass:"line-number"},[s._v("132")]),a("br"),a("span",{staticClass:"line-number"},[s._v("133")]),a("br"),a("span",{staticClass:"line-number"},[s._v("134")]),a("br"),a("span",{staticClass:"line-number"},[s._v("135")]),a("br"),a("span",{staticClass:"line-number"},[s._v("136")]),a("br"),a("span",{staticClass:"line-number"},[s._v("137")]),a("br"),a("span",{staticClass:"line-number"},[s._v("138")]),a("br"),a("span",{staticClass:"line-number"},[s._v("139")]),a("br"),a("span",{staticClass:"line-number"},[s._v("140")]),a("br"),a("span",{staticClass:"line-number"},[s._v("141")]),a("br"),a("span",{staticClass:"line-number"},[s._v("142")]),a("br"),a("span",{staticClass:"line-number"},[s._v("143")]),a("br"),a("span",{staticClass:"line-number"},[s._v("144")]),a("br")])]),a("p",[s._v("board目录下主要是一些硬件相关的配置， product 目录主要是产品相关的配置")]),s._v(" "),a("p",[s._v("针对我们选择的 aosp_x86_64-eng，我们主要关注以下几个文件：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/board/generic_x86_64/BoardConfig.mk")]),s._v(" ： 用于硬件相关配置")]),s._v(" "),a("li",[a("code",[s._v("/product/AndroidProducts.mk")]),s._v(" "),a("code",[s._v("/product/aosp_x86_64.mk")]),s._v("：用于配置 Product")])]),s._v(" "),a("p",[s._v("接下来我们来看看这三个配置文件：")]),s._v(" "),a("p",[a("strong",[s._v("BoardConfig.mk")]),s._v(" 用于定义和硬件相关的底层特性和变量，比如当前源码支持的 cpu 位数(64/32位)，bootloader 和 kernel, 是否支持摄像头，GPS导航等一些板级特性。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# x86_64 emulator specific definitions")]),s._v("\nTARGET_CPU_ABI :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\nTARGET_ARCH :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\nTARGET_ARCH_VARIANT :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\n\nTARGET_2ND_CPU_ABI :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86\nTARGET_2ND_ARCH :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86\nTARGET_2ND_ARCH_VARIANT :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\n\nTARGET_PRELINK_MODULE :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\ninclude build/make/target/board/BoardConfigGsiCommon.mk\ninclude build/make/target/board/BoardConfigEmuCommon.mk\n\nBOARD_USERDATAIMAGE_PARTITION_SIZE :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("576716800")]),s._v("\n\nBOARD_SEPOLICY_DIRS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" device/generic/goldfish/sepolicy/x86\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Wifi.")]),s._v("\nBOARD_WLAN_DEVICE           :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" emulator\nBOARD_HOSTAPD_DRIVER        :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NL80211\nBOARD_WPA_SUPPLICANT_DRIVER :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NL80211\nBOARD_HOSTAPD_PRIVATE_LIB   :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" lib_driver_cmd_simulated\nBOARD_WPA_SUPPLICANT_PRIVATE_LIB :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" lib_driver_cmd_simulated\nWPA_SUPPLICANT_VERSION      :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" VER_0_8_X\nWIFI_DRIVER_FW_PATH_PARAM   :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/null"')]),s._v("\nWIFI_DRIVER_FW_PATH_STA     :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/null"')]),s._v("\nWIFI_DRIVER_FW_PATH_AP      :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/null"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[s._v("其中还通过 include 包含了 BoardConfigGsiCommon.mk 和 BoardConfigEmuCommon.mk 两个配置文件，前者用于通用系统映像的配置，后者用于模拟器的配置")]),s._v(" "),a("p",[s._v("主要和硬件相关，有一个基本的了解即可。一般很少改动。")]),s._v(" "),a("p",[a("strong",[s._v("AndroidProducts.mk")]),s._v(" 定义我们执行 lunch 命令时，打印的列表以及每个选项对应的配置文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Unbundled apps will be built with the most generic product config.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# TARGET_BUILD_APPS 编译Android系统时，这个值为空，编译单模块时，这个值为所编译模块的路径")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#编译单模块")]),s._v("\nifneq "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("TARGET_BUILD_APPS"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPRODUCT_MAKEFILES :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_arm64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_arm.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/full.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/full_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#编译系统")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\nPRODUCT_MAKEFILES :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_64bitonly_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_arm64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_arm.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_x86_arm.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/aosp_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/full.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/full_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/generic.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/generic_system_arm64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/generic_system_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/generic_system_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/generic_system_x86_arm.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/generic_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/mainline_system_arm64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/mainline_system_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/mainline_system_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/mainline_system_x86_arm.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/ndk.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk_arm64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk_phone_arm64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk_phone_armv7.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk_phone_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk_phone_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/sdk_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\nendif\n\nPRODUCT_MAKEFILES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/mainline_sdk.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/module_arm.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/module_arm64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/module_x86.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/module_x86_64.mk "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置我们在 lunch 时的选项")]),s._v("\nCOMMON_LUNCH_CHOICES :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    aosp_arm64-eng "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    aosp_arm-eng "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    aosp_x86_64-eng "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    aosp_x86-eng "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br")])]),a("p",[s._v("PRODUCT_MAKEFILES 用于引入产品的配置文件")]),s._v(" "),a("p",[s._v("COMMON_LUNCH_CHOICES 用于添加 lunch 时的选项，选项的名字由两部分过程 "),a("code",[s._v("产品名 + 构建模式")]),s._v("：")]),s._v(" "),a("ul",[a("li",[s._v("产品名就是 PRODUCT_MAKEFILES 中引入的产品配置文件名去掉 "),a("code",[s._v(".mk")]),s._v(" 后缀，例如 aosp_x86_64")]),s._v(" "),a("li",[s._v("构建模式有三种：用户模式 user、用户调试模式 userdebug 和工程模式 eng")])]),s._v(" "),a("p",[s._v("主要区别如下：、")]),s._v(" "),a("p",[a("strong",[s._v("用户模式 user")])]),s._v(" "),a("ul",[a("li",[s._v("仅安装标签为 user 的模块")]),s._v(" "),a("li",[s._v("设定属性 ro.secure=1，打开安全检查功能")]),s._v(" "),a("li",[s._v("设定属性 ro.debuggable=0，关闭应用调试功能")]),s._v(" "),a("li",[s._v("默认关闭 adb 功能")]),s._v(" "),a("li",[s._v("打开 Proguard 混淆器")]),s._v(" "),a("li",[s._v("打开 DEXPREOPT 预先编译优化")])]),s._v(" "),a("p",[a("strong",[s._v("用户调试模式 userdebug")])]),s._v(" "),a("ul",[a("li",[s._v("安装标签为 user、debug 的模块")]),s._v(" "),a("li",[s._v("设定属性 ro.secure=1，打开安全检查功能")]),s._v(" "),a("li",[s._v("设定属性 ro.debuggable=1，启用应用调试功能")]),s._v(" "),a("li",[s._v("默认打开 adb 功能")]),s._v(" "),a("li",[s._v("打开 Proguard 混淆器")]),s._v(" "),a("li",[s._v("打开 DEXPREOPT 预先编译优化")])]),s._v(" "),a("p",[a("strong",[s._v("工程模式 eng")])]),s._v(" "),a("ul",[a("li",[s._v("安装标签为 user、debug、eng 的模块")]),s._v(" "),a("li",[s._v("设定属性 ro.secure=0，关闭安全检查功能")]),s._v(" "),a("li",[s._v("设定属性 ro.debuggable=1，启用应用调试功能")]),s._v(" "),a("li",[s._v("设定属性 ro.kernel.android.checkjni=1，启用 JNI 调用检查")]),s._v(" "),a("li",[s._v("默认打开 adb 功能")]),s._v(" "),a("li",[s._v("关闭 Proguard 混淆器")]),s._v(" "),a("li",[s._v("关闭 DEXPREOPT 预先编译优化")])]),s._v(" "),a("p",[a("strong",[s._v("aosp_x86_64.mk")]),s._v("：这个文件就是我们产品配置的主基地。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("PRODUCT_USE_DYNAMIC_PARTITIONS :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The system image of aosp_x86_64-userdebug is a GSI for the devices with:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - x86 64 bits user space")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 64 bits binder interface")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - system-as-root")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - VNDK enforcement")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - compatible property override enabled")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is a build configuration for a full-featured build of the")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Open-Source part of the tree. It's geared toward a US-centric")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# build quite specifically for the emulator, and might not be")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# entirely appropriate to inherit from for on-device configurations.")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# GSI for system/product")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("call inherit-product, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/product/core_64_bit.mk"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("call inherit-product, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/product/gsi_common.mk"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Emulator for vendor")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("call inherit-product-if-exists, device/generic/goldfish/x86_64-vendor.mk"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("call inherit-product, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/product/emulator_vendor.mk"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("call inherit-product, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/board/generic_x86_64/device.mk"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable mainline checking for excat this product name")]),s._v("\nifeq "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("aosp_x86_64,"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("TARGET_PRODUCT"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nPRODUCT_ENFORCE_ARTIFACT_PATH_REQUIREMENTS :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" relaxed\nendif\n\nPRODUCT_ARTIFACT_PATH_REQUIREMENT_WHITELIST "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    root/init.zygote32_64.rc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    root/init.zygote64_32.rc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copy different zygote settings for vendor.img to select by setting property")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ro.zygote=zygote64_32 or ro.zygote=zygote32_64:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   1. 64-bit primary, 32-bit secondary OR")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   2. 32-bit primary, 64-bit secondary")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# init.zygote64_32.rc is in the core_64_bit.mk below")]),s._v("\nPRODUCT_COPY_FILES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    system/core/rootdir/init.zygote32_64.rc:root/init.zygote32_64.rc\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Product 基本信息")]),s._v("\nPRODUCT_NAME :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" aosp_x86_64\nPRODUCT_DEVICE :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" generic_x86_64\nPRODUCT_BRAND :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Android\nPRODUCT_MODEL :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" AOSP on x86_64\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br")])]),a("p",[a("strong",[s._v("inherit-product")]),s._v(" 函数表示继承另外一个文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("call inherit-product, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("$(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/product/emulator_vendor.mk"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("call inherit-product-if-exists, device/generic/goldfish/x86_64-vendor.mk"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("在 Makefile 中可使用 "),a("strong",[s._v("“-include”")]),s._v(" 来代替 “include”，来忽略由于包含文件不存在或者无法创建时的错误提示（“-”的意思是告诉make，忽略此操作的错误。make继续执行）,如果不加-,当 include 的文件出错或者不存在的时候， make 会报错并退出。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-include")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("TARGET_DEVICE_DIR"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/AndroidBoard.mk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("include 和 inherit-product 的区别")]),s._v("：")]),s._v(" "),a("ul",[a("li",[s._v("假设 "),a("code",[s._v("PRODUCT_VAR := a")]),s._v(" 在 A.mk 中, "),a("code",[s._v("PRODUCT_VAR := b")]),s._v(" 在 B.mk 中。")]),s._v(" "),a("li",[s._v("如果你在 A.mk 中 include B.mk，你最终会得到 "),a("code",[s._v("PRODUCT_VAR := b")]),s._v("。")]),s._v(" "),a("li",[s._v("但是如果你在 A.mk inherit-product B.mk，你会得到 "),a("code",[s._v("PRODUCT_VAR := a b")]),s._v("。并 inherit-product 确保您不会两次包含同一个 makefile 。")])]),s._v(" "),a("p",[a("strong",[s._v("Product 配置文件中涉及的变量")]),s._v("可分为一下几类：")]),s._v(" "),a("ul",[a("li",[s._v("通用变量")]),s._v(" "),a("li",[s._v("路径变量")]),s._v(" "),a("li",[s._v("自定义变量")]),s._v(" "),a("li",[s._v("功能变量")])]),s._v(" "),a("p",[a("strong",[s._v("通用变量")])]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("PRODUCT_BRAND "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" Android\n\nPRODUCT_NAME "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" sdk_phone_x86_64\n\nPRODUCT_DEVICE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" generic_x86_64\n\nPRODUCT_MODEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" Android SDK built for x86_64\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("常用的"),a("strong",[s._v("路径变量")])]),s._v(" "),a("ul",[a("li",[s._v("SRC_TARGET_DIR 其值为 build/target")]),s._v(" "),a("li",[s._v("LOCAL_DIR 代表当前目录")])]),s._v(" "),a("p",[a("strong",[s._v("自定义变量")]),s._v("，表示该变量如何使用， 取决于自己，如：")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("BOARD_DDR_VAR_ENABLED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" true\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("功能变量")]),s._v("：表示改变量有特殊功能")]),s._v(" "),a("ul",[a("li",[s._v("PRODUCT_COPY_FILES： 用于完成拷贝，可以将源码中的文件拷贝到编译好的分区文件中")])]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("PRODUCT_COPY_FILES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" vendor/rockchip/common/phone/etc/spn-conf.xml"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("system/etc/spn-conf.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("PRODUCT_PROPERTY_OVERRIDES： 用于设置系统属性(覆盖)")])]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("PRODUCT_PROPERTY_OVERRIDES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" \\\n    ro.product.version "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 1.0.0 \\\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"_3-添加自己的-product"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-添加自己的-product"}},[s._v("#")]),s._v(" 3. 添加自己的 Product")]),s._v(" "),a("p",[s._v("这里假设我们的公司名叫果冻（Jelly），我们准备开发一款对标苹果 14 的手机，取名叫 大米14（Rice14）。")]),s._v(" "),a("p",[s._v("接下来我们在源码中添加我们自己的产品（Product）")]),s._v(" "),a("p",[s._v("在 device 目录下添加如下的目录与文件：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Jelly/\n└── Rice14\n    ├── AndroidProducts.mk\n    ├── BoardConfig.mk\n    └── Rice14.mk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("BoardConfig.mk 包含了硬件芯片架构配置，分区大小配置等信息这里我们直接使用 aosp_x86_64 的 BoardConfig.mk 就行。BoardConfig.mk 拷贝自 build/target/board/generic_x86_64/BoardConfig.mk")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# x86_64 emulator specific definitions")]),s._v("\nTARGET_CPU_ABI :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\nTARGET_ARCH :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\nTARGET_ARCH_VARIANT :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\n\nTARGET_2ND_CPU_ABI :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86\nTARGET_2ND_ARCH :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86\nTARGET_2ND_ARCH_VARIANT :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" x86_64\n\nTARGET_PRELINK_MODULE :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\ninclude build/make/target/board/BoardConfigGsiCommon.mk\ninclude build/make/target/board/BoardConfigEmuCommon.mk\n\nBOARD_USERDATAIMAGE_PARTITION_SIZE :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("576716800")]),s._v("\n\nBOARD_SEPOLICY_DIRS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" device/generic/goldfish/sepolicy/x86\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Wifi.")]),s._v("\nBOARD_WLAN_DEVICE           :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" emulator\nBOARD_HOSTAPD_DRIVER        :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NL80211\nBOARD_WPA_SUPPLICANT_DRIVER :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" NL80211\nBOARD_HOSTAPD_PRIVATE_LIB   :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" lib_driver_cmd_simulated\nBOARD_WPA_SUPPLICANT_PRIVATE_LIB :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" lib_driver_cmd_simulated\nWPA_SUPPLICANT_VERSION      :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" VER_0_8_X\nWIFI_DRIVER_FW_PATH_PARAM   :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/null"')]),s._v("\nWIFI_DRIVER_FW_PATH_STA     :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/null"')]),s._v("\nWIFI_DRIVER_FW_PATH_AP      :"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/dev/null"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[s._v("Rice14.mk 拷贝自 build/target/product/aosp_x86_64.mk")]),s._v(" "),a("p",[s._v("其中的 if 语句需要注释掉，同时需要修改最后四行")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("PRODUCT_USE_DYNAMIC_PARTITIONS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" true\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The system image of aosp_x86_64-userdebug is a GSI for the devices with:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - x86 64 bits user space")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - 64 bits binder interface")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - system-as-root")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - VNDK enforcement")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# - compatible property override enabled")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# This is a build configuration for a full-featured build of the")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Open-Source part of the tree. It's geared toward a US-centric")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# build quite specifically for the emulator, and might not be")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# entirely appropriate to inherit from for on-device configurations.")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# GSI for system/product")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),s._v(" inherit-product, "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/product/core_64_bit.mk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),s._v(" inherit-product, "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/product/gsi_common.mk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Emulator for vendor")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),s._v(" inherit-product-if-exists, device/generic/goldfish/x86_64-vendor.mk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),s._v(" inherit-product, "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/product/emulator_vendor.mk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("call")]),s._v(" inherit-product, "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("SRC_TARGET_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/board/generic_x86_64/device.mk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Enable mainline checking for excat this product name")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#ifeq (aosp_x86_64,$(TARGET_PRODUCT))")]),s._v("\nPRODUCT_ENFORCE_ARTIFACT_PATH_REQUIREMENTS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" relaxed\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#endif")]),s._v("\n\nPRODUCT_ARTIFACT_PATH_REQUIREMENT_WHITELIST "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" \\\n    root/init.zygote32_64.rc \\\n    root/init.zygote64_32.rc \\\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Copy different zygote settings for vendor.img to select by setting property")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ro.zygote=zygote64_32 or ro.zygote=zygote32_64:")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   1. 64-bit primary, 32-bit secondary OR")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#   2. 32-bit primary, 64-bit secondary")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# init.zygote64_32.rc is in the core_64_bit.mk below")]),s._v("\nPRODUCT_COPY_FILES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v(" \\\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("    system/core/rootdir/init.zygote32_64.rc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("root/init.zygote32_64.rc\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Overrides")]),s._v("\nPRODUCT_BRAND "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" Jelly\nPRODUCT_NAME "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" Rice14\nPRODUCT_DEVICE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" Rice14\nPRODUCT_MODEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" Android SDK built for x86_64 Rice14\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br")])]),a("p",[s._v("AndroidProducts.mk 内容如下：")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[s._v("PRODUCT_MAKEFILES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" \\\n    "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("LOCAL_DIR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("/Rice14.mk\n\nCOMMON_LUNCH_CHOICES "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" \\\n    Rice14-eng \\\n    Rice14-userdebug \\\n    Rice14-user \\\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("最后验证：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" build/envsetup.sh\nlunch Rice14-eng\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j16")]),s._v("\nemulator\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("以上示例给出了最简单的模拟器 Product 的添加，主要是用于我们的学习。")]),s._v(" "),a("h2",{attrs:{id:"关于"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于"}},[s._v("#")]),s._v(" 关于")]),s._v(" "),a("p",[s._v("我叫阿豪，2015 年本科毕业于国防科学技术大学指挥信息系统专业，毕业后从事信息化装备的研发工作，主要研究方向是 Android Framework 与 Linux Kernel。")]),s._v(" "),a("p",[s._v("如果你对 Android Framework 感兴趣或者正在学习 Android Framework，可以关注我的微信公众号和抖音，我会持续分享我的学习经验，帮助正在学习的你少走一些弯路。学习过程中如果你有疑问或者你的经验想要分享给大家可以添加我的微信，我拉你进技术交流群。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/zzh0838/MyImages@main/img/%E4%BA%8C%E7%BB%B4%E7%A0%81.jpg",alt:""}})])])}),[],!1,null,null,null);a.default=e.exports}}]);